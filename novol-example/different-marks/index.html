<script src='js/aframe-master.min.js'></script>
<script src="js/aframe-extras.js"></script>
	
<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }
</style>

<!-- rawgithack development URL -->
<script src='js/aframe-ar-nft.js'></script>

<script src="js/coursor-listeners.js"></script>
<script src="js/click-listeners.js"></script>

<body style='margin : 0px; overflow: hidden;'>
   <!-- minimal loader shown until image descriptors are loaded -->
  <div class="arjs-loader">
    <div>Loading, please wait...</div>
  </div>
    <a-scene
        vr-mode-ui='enabled: false;'
        renderer="logarithmicDepthBuffer: true;"
        embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'>

        <a-mixin id="board" geometry="depth: .05; height: 1.5; width: 6" material="shader: flat" pivot="0 0.5 0" position="0 -1 0"></a-mixin>
        <a-mixin id="unhinge" animation="property: rotation; to: 0 0 0; dur: 1000"></a-mixin>
        <img crossorigin="anonymous" id="shadow" src="radial-shadow-2.png">
        
        <!-- Novol 8500 -->
        <img crossorigin="anonymous" id="novol-11" src="images/unfold-lib/novol-11.jpg">
        <img crossorigin="anonymous" id="novol-12" src="images/unfold-lib/novol-12.jpg">
        <img crossorigin="anonymous" id="novol-13" src="images/unfold-lib/novol-13.jpg">
        <img crossorigin="anonymous" id="novol-14" src="images/unfold-lib/novol-14.jpg">
        <img crossorigin="anonymous" id="novol-15" src="images/unfold-lib/novol-15.jpg">

        <!-- Novol Cobra -->
        <img crossorigin="anonymous" id="novol-cobra-11" src="images/unfold-lib/novol-cobra-11.jpg">
        <img crossorigin="anonymous" id="novol-cobra-12" src="images/unfold-lib/novol-cobra-12.jpg">
        <img crossorigin="anonymous" id="novol-cobra-13" src="images/unfold-lib/novol-cobra-13.jpg">
        <img crossorigin="anonymous" id="novol-cobra-14" src="images/unfold-lib/novol-cobra-14.jpg">
        <img crossorigin="anonymous" id="novol-cobra-15" src="images/unfold-lib/novol-cobra-15.jpg">

        <!-- Novol Spectral -->
        <img crossorigin="anonymous" id="novol-spectral-11" src="images/unfold-lib/novol-spectral-11.jpg">
        <img crossorigin="anonymous" id="novol-spectral-12" src="images/unfold-lib/novol-spectral-12.jpg">
        <img crossorigin="anonymous" id="novol-spectral-13" src="images/unfold-lib/novol-spectral-13.jpg">
        <img crossorigin="anonymous" id="novol-spectral-14" src="images/unfold-lib/novol-spectral-14.jpg">
        <img crossorigin="anonymous" id="novol-spectral-15" src="images/unfold-lib/novol-spectral-15.jpg">

        <!-- Novol Ultra -->
        <img crossorigin="anonymous" id="novol-ultra-11" src="images/unfold-lib/novol-ultra-11.jpg">
        <img crossorigin="anonymous" id="novol-ultra-12" src="images/unfold-lib/novol-ultra-12.jpg">
        <img crossorigin="anonymous" id="novol-ultra-13" src="images/unfold-lib/novol-ultra-13.jpg">
        <img crossorigin="anonymous" id="novol-ultra-14" src="images/unfold-lib/novol-ultra-14.jpg">
        <img crossorigin="anonymous" id="novol-ultra-15" src="images/unfold-lib/novol-ultra-15.jpg">

        <!-- Novol 8500 -->
        <a-nft
            type='nft' url='novol-example/different-marks/data-images/novol-b/novol-b'
            smooth='true' smoothCount='23' smoothTolerance='.3' smoothThreshold='30'>
            
            <a-entity scale="50 50 50" class="container"
                animation__position="attribute: position; to: 0 5 -8; dur: 2000"
                animation__rotation="property: rotation; from: -90 0 0; to: -90 0 0; dur: 2500" novol-cursor-listener novol-click>

              <a-box class="plane" mixin="board" src="#novol-11" rotation="-20 0 0" animation="delay: 1000">
                <a-box class="plane" mixin="board" src="#novol-12" rotation="-175 0 0" animation="delay: 250">
                  <a-box class="plane" mixin="board" src="#novol-13" rotation="-180 0 0" animation="delay: 500">
                    <a-box class="plane" mixin="board" src="#novol-14" rotation="-180 0 0" animation="delay: 750">
                      <a-box class="plane" mixin="board" src="#novol-15" rotation="-180 0 0" animation="delay: 1000">
                      </a-box>
                    </a-box>
                  </a-box>
                </a-box>
              </a-box>
            </a-entity>
        </a-nft>

        <!-- Novol Cobra -->
        <a-nft
            type='nft' url='novol-example/different-marks/data-images/novol-cobra-b/novol-cobra-b'
            smooth='true' smoothCount='23' smoothTolerance='.3' smoothThreshold='30'>
            <a-entity scale="50 50 50" class="container"
                animation__position="attribute: position; to: 0 5 -8; dur: 2000"
                animation__rotation="property: rotation; from: -90 0 0; to: -90 0 0; dur: 2500" cobra-cursor-listener novol-cobra-click>

              <a-box class="plane-cobra" mixin="board" src="#novol-cobra-11" rotation="-20 0 0" animation="delay: 1000">
                <a-box class="plane-cobra" mixin="board" src="#novol-cobra-12" rotation="-175 0 0" animation="delay: 250">
                  <a-box class="plane-cobra" mixin="board" src="#novol-cobra-13" rotation="-180 0 0" animation="delay: 500">
                    <a-box class="plane-cobra" mixin="board" src="#novol-cobra-14" rotation="-180 0 0" animation="delay: 750">
                      <a-box class="plane-cobra" mixin="board" src="#novol-cobra-15" rotation="-180 0 0" animation="delay: 1000">
                      </a-box>
                    </a-box>
                  </a-box>
                </a-box>
              </a-box>
            </a-entity>
        </a-nft>

        <!-- Novol Spectral -->
        <a-nft
            type='nft' url='novol-example/different-marks/data-images/novol-spectral-b/novol-spectral-b'
            smooth='true' smoothCount='23' smoothTolerance='.3' smoothThreshold='30'>
            
            <a-entity scale="50 50 50" class="container"
                animation__position="attribute: position; to: 0 5 -8; dur: 2000"
                animation__rotation="property: rotation; from: -90 0 0; to: -90 0 0; dur: 2500" spectral-cursor-listener novol-spectral-click>

              <a-box class="plane-spectral" mixin="board" src="#novol-spectral-11" rotation="-20 0 0" animation="delay: 1000">
                <a-box class="plane-spectral" mixin="board" src="#novol-spectral-12" rotation="-175 0 0" animation="delay: 250">
                  <a-box class="plane-spectral" mixin="board" src="#novol-spectral-13" rotation="-180 0 0" animation="delay: 500">
                    <a-box class="plane-spectral" mixin="board" src="#novol-spectral-14" rotation="-180 0 0" animation="delay: 750">
                      <a-box class="plane-spectral" mixin="board" src="#novol-spectral-15" rotation="-180 0 0" animation="delay: 1000">
                      </a-box>
                    </a-box>
                  </a-box>
                </a-box>
              </a-box>
            </a-entity>
        </a-nft>

        <!-- Novol Ultra -->
        <a-nft
            type='nft' url='novol-example/different-marks/data-images/novol-ultra-b/novol-ultra-b'
            smooth='true' smoothCount='23' smoothTolerance='.3' smoothThreshold='30'>
            
            <a-entity scale="50 50 50" class="container"
                animation__position="attribute: position; to: 0 5 -8; dur: 2000"
                animation__rotation="property: rotation; from: -90 0 0; to: -90 0 0; dur: 2500" ultra-cursor-listener novol-ultra-click>

              <a-box class="plane-ultra" mixin="board" src="#novol-ultra-11" rotation="-20 0 0" animation="delay: 1000">
                <a-box class="plane-ultra" mixin="board" src="#novol-ultra-12" rotation="-175 0 0" animation="delay: 250">
                  <a-box class="plane-ultra" mixin="board" src="#novol-ultra-13" rotation="-180 0 0" animation="delay: 500">
                    <a-box class="plane-ultra" mixin="board" src="#novol-ultra-14" rotation="-180 0 0" animation="delay: 750">
                      <a-box class="plane-ultra" mixin="board" src="#novol-ultra-15" rotation="-180 0 0" animation="delay: 1000">
                      </a-box>
                    </a-box>
                  </a-box>
                </a-box>
              </a-box>
            </a-entity>
        </a-nft>

        <a-entity camera>
          <a-cursor geometry="primitive: ring" material="color: #FFC0CB;    shader: flat"></a-cursor>
        </a-entity>
    </a-scene>
</body>

<script>
  var sceneEl = document.querySelector('a-scene');
  var entityList = sceneEl.querySelectorAll('.container');
  var firstVertical = true;
  if(screen.orientation.angle != 0){
    firstVertical = false;
  }

  start();

  function start() {
    // For first setup 
    entityList.forEach(function(item) {
      item.setAttribute('position', { x: screen.width, y: 0, z: -(1.2 * screen.height) });
      
      console.log(item.getAttribute("position"));
    });
  }

  screen.orientation.addEventListener("change", function(e) {

    //First Vertical
    if(screen.orientation.angle != 0 && firstVertical){
      
      entityList.forEach(function(item) {
        item.setAttribute('position', { x: 0, y: 0, z: -(screen.height / 2) });
      });
    }
    //First Horizontal
    if(screen.orientation.angle == 0 && !firstVertical){
      
      entityList.forEach(function(item) {
        item.setAttribute('position', { x: 1.33 * screen.width, y: 0, z: -(screen.height / 2) });
      });
    }
  }, false);
  
</script>
